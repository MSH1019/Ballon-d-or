{% extends "ballon_dor/base.html" %}
{% load static %}
{% block title %}Live Results{% endblock %}

{% block content %}
<div class="results-page">
  <div class="results-header">
    <h1 class="results-title">Live Results</h1>
    <button class="refresh-btn" onclick="location.reload()">Refresh</button>
  </div>

  <table class="results-table">
    <thead>
      <tr>
        <th>Rank</th>
        <th>Player</th>
        <th>Points</th>
      </tr>
    </thead>
    <tbody>
      {% for rank, player, points in results %}
        <tr class="rank-{{ rank }}">
          <td>{{ rank }}</td>
          <td>{{ player.name }}</td>
          <td>{{ points }}</td>
        </tr>
        {% if rank == 3 and results|length > 3 %}
          <tr class="separator-row">
            <td colspan="3">
              <div class="top3-separator">

              </div>
            </td>
          </tr>
        {% endif %}
      {% endfor %}
    </tbody>
  </table>

  <div class="vote-stats">
    {% if total_votes > 0 %}
      Based on <span class="vote-count">{{ total_votes }}</span> verified votes
    {% endif %}
  </div>

  <div class="results-actions">
    <a href="{% url 'home' %}" class="btn gold-btn">Back to Home</a>
    <a href="{% url 'vote' %}" class="btn outline-btn">Vote Now</a>
  </div>
</div>

<!-- Auto-refresh script -->
<script>
  // Auto-refresh every 30 seconds
  setTimeout(function() {
    location.reload();
  }, 30000);
</script>
{% endblock %}