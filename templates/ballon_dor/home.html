{% extends "ballon_dor/base.html" %}
{% load static %}

{% block title %}Welcome{% endblock %}

{% block content %}

  <div class="hero">
    <h1 class="hero-title">
      <img src="{% static 'images/main.jpg' %}" alt="Ballon d'Or Trophy" class="hero-icon">
      People's Fan Award
    </h1>

    <p class="hero-subtitle">Pick your top 3 players and see how the world is voting!</p>
    <div class="hero-buttons">
      <a href="{% url 'vote' %}" class="btn gold-btn">Vote Now</a>
      <a href="{% url 'live_results' %}" class="btn outline-btn">See Live Results</a>
    </div>
  </div>

  <div class="contenders">
    <h2>Top 2025 Contenders</h2>
    <div class="card-grid">
      {% for contender in contenders %}
        <div class="card {% if forloop.counter > 5 %}hidden{% endif %}">
          <a href="{% url 'candidate_detail' contender.year contender.slug %}" style="text-decoration: none; color: inherit;">
            <img src="{{ contender.image.url|default:'{% static "players/default.jpg" %}' }}" alt="{{ contender.player.name }}">
            <h3>{{ contender.player.name }}</h3>
            <p>{{ contender.club.name|default:'N/A' }} ({{ contender.player.country }})</p>
          </a>
        </div>
      {% endfor %}
    </div>
    {% if contenders|length > 5 %}
      <button id="see-more" class="btn gold-btn">See More</button>
    {% endif %}
  </div>



  <footer class="footer">
    <p>This is an educational portfolio project. Not affiliated with France Football, FIFA, or the official Ballon d'Or award.</p>
    <p>Player images and names used for demonstration purposes only.</p>
  </footer>

  <script>
    const cards = document.querySelectorAll('.card.hidden');
    let visibleCount = 5;
    const batchSize = 5;

    document.getElementById('see-more')?.addEventListener('click', () => {
      for (let i = 0; i < batchSize; i++) {
        if (cards[visibleCount - 5 + i]) {
          cards[visibleCount - 5 + i].classList.remove('hidden');
        }
      }
      visibleCount += batchSize;
      if (visibleCount >= cards.length + 5) {
        document.getElementById('see-more').style.display = 'none';
      }
    });
  </script>

{% endblock %}